mf_args <-
mf %>%
dplyr::select(-fxGeom_class) %>%
tectr:::lst_mf_args()
do.call(fxe_labeller,
rlang::list2(fxGeom_class = fx_geom, !!!mf_args))
}
) %>%
magrittr::set_names(vars)
lst
rlang::splice(lst)
rlang::splice(lst) %>% labeller
(rlang::splice(lst) %>% labeller)(data.frame(column_name = "C"))
(rlang::splice(lst) %>% labeller)(data.frame(column_name = "c"))
(rlang::splice(lst) %>% labeller)(data.frame(column_name = "C"))
labeller(column_name = LETTERS[1:10] %>% set_names(letters[1:10]))
labeller(column_name = LETTERS[1:10] %>% set_names(letters[1:10]))(data.frame(column_name = "C"))
labeller(column_name = LETTERS[1:10] %>% set_names(letters[1:10]))(data.frame(column_name = "c"))
library(tectr)
tst <- LETTERS[1:10] %>% set_names(letters[1:10])
tst
labeller(column_name = tst) -> tst2
tst2
tst2(data.frame(column_name = "A"))
tst2(data.frame(column_name = "a"))
ex <-
data.frame(column_name = LETTERS[1:10]) %>%
fx_default(columns = c("fxGeom_class", "fxGeom_limits")) %>%
mutate_mf(fxGeom_breaks = list(letters[1:10])) %>%
fxi_labeller(vars(column_name))
ex <-
data.frame(column_name = LETTERS[1:10]) %>%
fx_default(columns = c("fxGeom_class", "fxGeom_limits")) %>%
mutate_mf(fxGeom_breaks = list(letters[1:10])) %>%
tectr:::fxi_labeller(vars(column_name))
ex(data.frame(column_name = "C"))$column_name
ex <-
data.frame(column_name = LETTERS[1:10]) %>%
fx_default(columns = c("fxGeom_class", "fxGeom_limits")) %>%
mutate_mf(fxGeom_breaks = list(letters[1:10]))
ex
metaframe(ex)
vars <- get_inds(facet_vars)
vars <- tectr:::get_inds(facet_vars)
vars
lst <-
vars %>%
purrr::map(
function(var) {
mf <-
metaframe(data) %>%
dplyr::filter(name == var)
cls <- mf$fxGeom_class
fx_geom <- fxGeom(cls)
mf_args <-
mf %>%
dplyr::select(-fxGeom_class) %>%
tectr:::lst_mf_args()
do.call(fxe_labeller,
rlang::list2(fxGeom_class = fx_geom, !!!mf_args))
}
)
lst
lst%>%
magrittr::set_names(vars)
lst%>%
magrittr::set_names(vars) %>%
rlang::splice() %>%
ggplot2::labeller() -> tst3
tst3
tst3("A")
tst3("a")
tst3(data.frame(column_name = "A"))
tst3(data.frame(column_name = "a"))
metaframe(ex)$fxGeom_breaks
metaframe(ex)$fxGeom_limits
lst
tst
labeller(column_name = tst)("A")
labeller(column_name = tst)(data.frame(column_name = "A"))
labeller(column_name = tst)(data.frame(column_name = ""))
labeller(column_name = tst)(data.frame(column_name = "a"))
library(tectr)
lst <-
vars %>%
purrr::map(
function(var) {
mf <-
metaframe(data) %>%
dplyr::filter(name == var)
cls <- mf$fxGeom_class
fx_geom <- fxGeom(cls)
mf_args <-
mf %>%
dplyr::select(-fxGeom_class) %>%
tectr:::lst_mf_args()
do.call(fxe_labeller,
rlang::list2(fxGeom_class = fx_geom, !!!mf_args))
}
)
lst
lst  %>%
magrittr::set_names(vars) %>%
rlang::splice() %>%
ggplot2::labeller() -> tst3
tst3
tst3(data.frame(column_name = "A"))
lst
lst %>%
magrittr::set_names(vars) %>%
rlang::splice() %>% rlang::list2()
?labeller
tst3("A")
tst3("a")
citation("methods")
devtools::use_package("methods")
geom_bin2d()
library(tidyverse)
geom_bin2d()
geom_bin2d()$geom
geom_bin2d()$stat
geom_hex()$stat
geom_density2d()$stat
library(tectr)
fx_ggplot(df_vdem %>% select(v2x_polyarchy, v2x_libdem), aes(x = v2x_polyarchy, v2x_libdem))
library(vdem.tectr)
fx_ggplot(df_vdem %>% select(v2x_polyarchy, v2x_libdem), aes(x = v2x_polyarchy, v2x_libdem))
fx_ggplot(df_vdem %>% select(v2x_polyarchy, v2x_libdem, year), aes(x = v2x_polyarchy, y = v2x_libdem, colour = year))
library(tectr)
?setClassUnion
fx_ggplot(df_vdem %>% select(v2x_polyarchy, v2x_libdem, year), aes(x = v2x_polyarchy, y = v2x_libdem, colour = year))
library(tectr)
ggplot(df_vdem, aes(x = v2x_polyarchy, y = v2x_libdem, ymin = v2x_libdem_codelow, ymax = v2x_libdem_codehigh)) + geom_point()
ggplot(df_vdem, aes(x = v2x_polyarchy, y = v2x_libdem, ymin = v2x_libdem_codelow, ymax = v2x_libdem_codehigh)) + geom_ribbon()
?geom_ribbon
ggplot(df_vdem, aes(x = v2x_polyarchy, y = v2x_libdem, ymin = v2x_libdem_codelow, ymax = v2x_libdem_codehigh)) + geom_point() + geom_errorbar()
ggplot(df_vdem, aes(x = v2x_polyarchy, xmin = v2x_polyarchy, xmax v2x_libdem, y = v2x_libdem, ymin = v2x_libdem_codelow, ymax = v2x_libdem_codehigh)) + geom_point() + geom_errorbar()
ggplot(df_vdem, aes(x = v2x_polyarchy, xmin = v2x_polyarchy, xmax = v2x_libdem, y = v2x_libdem, ymin = v2x_libdem_codelow, ymax = v2x_libdem_codehigh)) + geom_point() + geom_errorbar()
?geom_errorbar
ggplot(df_vdem, aes(x = v2x_polyarchy, xmin = v2x_polyarchy, xmax = v2x_libdem, y = v2x_libdem, ymin = v2x_libdem_codelow, ymax = v2x_libdem_codehigh)) + geom_linerange()
ggplot(df_vdem, aes(x = v2x_polyarchy, xmin = v2x_polyarchy, xmax = v2x_libdem, y = v2x_libdem, ymin = v2x_libdem_codelow, ymax = v2x_libdem_codehigh)) + geom_errorbarh()
ggplot(df_vdem, aes(x = v2x_polyarchy, xmin = v2x_polyarchy, xmax = v2x_libdem, y = v2x_libdem, ymin = v2x_libdem_codelow, ymax = v2x_libdem_codehigh)) + geom_errorbarh(alpha = 0.05) + geom_point()
ggplot(df_vdem %>% filter(year == 2017), aes(x = v2x_polyarchy, xmin = v2x_polyarchy, xmax = v2x_libdem, y = v2x_libdem, ymin = v2x_libdem_codelow, ymax = v2x_libdem_codehigh)) + geom_linerange() + geom_point()
df_vdem$v2exdjcbhg_ord
ggplot(df_vdem %>% filter(country_name == "Germany"), aes(year, v2exdjcbhg_ord)) +
) + geom_line()
ggplot(df_vdem %>% filter(country_name == "Germany"), aes(year, v2exdjcbhg_ord)) + geom_line()
ggplot(df_vdem %>% filter(country_name == "Germany"), aes(year, v2exdjcbhg_ord)) + geom_step()
ggplot(df_vdem %>% filter(country_name == "Germany"), aes(year, v2exdjcbhg_osp)) + geom_line()
ggplot(df_vdem %>% filter(country_name == "Germany"), aes(year, v2exdjcbhg_ord)) + geom_point()
?geom_line
ggplot(df_vdem %>% filter(country_name == "Germany"), aes(year, v2exdjcbhg_ord, group = NULL)) + geom_line()
ggplot(df_vdem %>% filter(country_name == "Germany"), aes(year, v2exdjcbhg_ord, group = NULL)) + geom_line(aes(group = country_name))
ggplot(df_vdem %>% filter(country_name == "Germany"), aes(year, v2exdjcbhg_ord, xmax = v2xexdjcbhg_ord_codehigh, xmin = v2xexdjcbhg_ord_codelow, group = NULL)) + geom_line(aes(group = country_name)) + geom_ribbon(alpha = .05)
ggplot(df_vdem %>% filter(country_name == "Germany"), aes(year, v2exdjcbhg_ord, xmax = v2exdjcbhg_ord_codehigh, xmin = v2exdjcbhg_ord_codelow, group = NULL)) + geom_line(aes(group = country_name)) + geom_ribbon(alpha = .05)
ggplot(df_vdem %>% filter(country_name == "Germany"), aes(year, v2exdjcbhg_ord, ymax = v2exdjcbhg_ord_codehigh, ymin = v2exdjcbhg_ord_codelow, group = NULL)) + geom_line(aes(group = country_name)) + geom_ribbon(alpha = .05)
ggplot(df_vdem %>% filter(country_name == "Germany"), aes(year, v2exdjcbhg_osp, ymax = v2exdjcbhg_osp_codehigh, ymin = v2exdjcbhg_osp_codelow, group = NULL)) + geom_line(aes(group = country_name)) + geom_ribbon(alpha = .1)
?quosure
?geom_pointrange
df <- data.frame(
trt = factor(c(1, 1, 2, 2)),
resp = c(1, 5, 3, 4),
group = factor(c(1, 2, 1, 2)),
upper = c(1.1, 5.3, 3.3, 4.2),
lower = c(0.8, 4.6, 2.4, 3.6)
)
p <- ggplot(df, aes(trt, resp, colour = group))
p + geom_linerange(aes(ymin = lower, ymax = upper))
p + geom_pointrange(aes(ymin = lower, ymax = upper))
p + geom_crossbar(aes(ymin = lower, ymax = upper), width = 0.2)
p + geom_errorbar(aes(ymin = lower, ymax = upper), width = 0.2)
geom_errorbar()
geom_errorbar()$geom
geom_pointrange()
geom_pointrange()$geom
?geom_pointrange
?geom_linerange
?geom_errorbarh
geom_ribbon()$geom
geom_linerange()$geom
fxGeom("OrdinalCi")
fxGeom("OrdinalCI")
library(tectr)
package?tectr
?fx_evaluate
fx_evaluate
?filepath
?as_filepath
library(tectr)
library(tectr)
library(tectr)
library(tectr)
covr::package_coverage()
?fx_ggplot
?fx_default
?fx_default_fxGeom_class
?fx_default_fxGeom_class
library(tectr)
?fx_default_fxGeom_class
fx_ggplot_columns
library(tectr)
?fxe_layer_complete_nominate
covr::report()
library(tectr)
?fxe_layer_complete_nominate
library(tectr)
?fxe_layer_nominate
?fxe_layer_complete_nominate
?GeomBoxplot
?fxe_layer_complete_nominate
library(tectr)
devtools::use_test("fx-fun-ggplot-fxGeomContinuousCI")
library(tectr)
?fx_output
?fx_info
?fx_info_title
library(tectr)
fxe_layer_complete_nominate(
fxGeom("ContinuousCI"),
AesName("y"),
data.frame(upper = 1:10, lower = 1:10),
fxGeom_assoc_vars = ggplot2::aes(upper = upper, lower = lower))
fxe_layer_complete_nominate(fxGeom("ContinuousCI"),
AesName("y"),
data.frame())
library(tectr)
fxe_layer_complete_nominate(fxGeom("ContinuousCI"),
AesName("y"),
data.frame())
fxe_layer_complete_nominate(
fxGeom("ContinuousCI"),
AesName("y"),
data.frame(upper = 1:10, lower = 1:10),
fxGeom_assoc_vars = ggplot2::aes(upper = upper, lower = lower))
tst <- aes(upper = x, lower = y, tst = tst)
library(ggplot2)
tst <- aes(upper = x, lower = y, tst = tst)
tst
tst[c("upper", "lower")] %>%
magrittr::set_names(c("xmax", "xmin"))
library(magrittr)
tst[c("upper", "lower")] %>%
magrittr::set_names(c("xmax", "xmin"))
ggplot2::geom_ribbon(new_mapping, alpha = 0.1) -> x
?warning
?supressWarnings
library(tectr)
covr::report()
devtools::use_test("fx-fun-ggplot-fxGeomOrdinalCI")
library(tectr)
devtools::use_test("fx-fun-ggplot-fxGeomTime")
library(tectr)
covr::package_coverage()
covr::report()
geom_smooth()$geom
ex3 <- fxe_layer_complete_nominate(
fxGeom("Time"), AesName("x"), data.frame(group = 1:15),
fxGeom_assoc_vars = ggplot2::aes(group = group)
)
ex3
covr::package_coverage()
?fx_ggplot
?fxe_layer_complete
?fxi_layer_complete
library(tectr)
devtools::use_readme_rmd()
devtools::use_coverage()
library(tectr)
citation("tectr")
devtools::use_travis()
?use_travis
devtools::use_coverage()
library(tectr)
install.packaes("sf")
install.packages("sf")
library(tectr)
library(tectr)
library(tectr)
library(tectr)
?label_value
?ggplot2::label_value
?fxe_default
?fxe_layer_single
?fx_write_jso
?fx_write_json
library(tectr)
library(tectr)
?fx_write_json
devtools::install_github("sflippl/tectr")
library(tectr)
?scale_x_continuous
library(ggplot2)
?scale_x_continuous
?scale_colour_continuous
library(tectr)
use_package("sf")
devtools::use_package("sf")
library(tectr)
library(tectr)
data.frame(upper = 1:10, lower = 3:12, y = 2:11, x =1:10)
data.frame(upper = 1:10, lower = 3:12, y = 2:11, x =1:10) -> tst
tst <- fx_default(tst, fx_ggplot_columns)
tst
metaframe(tst)
tst <- tst %>% mutate_mf(fxGeom_class = if_else(name == "y", "ContinuousCI", "Continuous"), fxGeom_assoc_vars = list(aes(upper = upper, lower = lower)))
library(tidyverse)
tst <- tst %>% mutate_mf(fxGeom_class = if_else(name == "y", "ContinuousCI", "Continuous"), fxGeom_assoc_vars = list(aes(upper = upper, lower = lower)))
tst
metaframe(tst)
fx_ggplot(tst, aes(x = x, y = y))
data <- tst
data <-
data %>%
fx_default(columns = fx_ggplot_columns, ...) %>%
fx_evaluate()
data <-
data %>%
fx_default(columns = fx_ggplot_columns) %>%
fx_evaluate()
data
metaframe(data)
layers <- c(
# At first, we add the geometric information along one dimension
purrr::map(names(mapping), ~ fxi_layer_single(data, mapping, .)) %>%
unlist(recursive = FALSE),
# Then, we add the geometric information that is dependent on all dimensions
fxi_layer_complete(data, mapping),
if(length(facet_vars) != 0)
facet_wrap(facet_vars, labeller = fxi_labeller(data, facet_vars))
else NULL
)
ggplot(data, mapping) + layers
mapping <- aes(x = x, y = y)
ggplot(data, mapping) + layers
layers <- c(
# At first, we add the geometric information along one dimension
purrr::map(names(mapping), ~ fxi_layer_single(data, mapping, .)) %>%
unlist(recursive = FALSE),
# Then, we add the geometric information that is dependent on all dimensions
fxi_layer_complete(data, mapping),
if(length(facet_vars) != 0)
facet_wrap(facet_vars, labeller = fxi_labeller(data, facet_vars))
else NULL
)
layers <- c(
# At first, we add the geometric information along one dimension
purrr::map(names(mapping), ~ tectr:::fxi_layer_single(data, mapping, .)) %>%
unlist(recursive = FALSE),
# Then, we add the geometric information that is dependent on all dimensions
tectr:::fxi_layer_complete(data, mapping),
if(length(facet_vars) != 0)
facet_wrap(facet_vars, labeller = tectr:::fxi_labeller(data, facet_vars))
else NULL
)
facet_vars <- vars()
layers <- c(
# At first, we add the geometric information along one dimension
purrr::map(names(mapping), ~ tectr:::fxi_layer_single(data, mapping, .)) %>%
unlist(recursive = FALSE),
# Then, we add the geometric information that is dependent on all dimensions
tectr:::fxi_layer_complete(data, mapping),
if(length(facet_vars) != 0)
facet_wrap(facet_vars, labeller = tectr:::fxi_labeller(data, facet_vars))
else NULL
)
layers
layers[[4]]
layers[[5]]
tectr:::fxi_layer_complete(data, mapping)
mf <- metaframe(data) %>%
dplyr::mutate(name = as.character(name)) %>%
dplyr::inner_join(
dplyr::tibble(aes = names(mapping), name = get_inds(mapping)),
by = "name")
mf <- metaframe(data) %>%
dplyr::mutate(name = as.character(name)) %>%
dplyr::inner_join(
dplyr::tibble(aes = names(mapping), name = tectr:::get_inds(mapping)),
by = "name")
mf
assertthat::assert_that("fxGeom_class" %in% colnames(mf))
nominations <- fxi_layer_complete_nominate(data, mf)
nominations <- tectr:::fxi_layer_complete_nominate(data, mf)
nominations
lst_fxGeom <- purrr::map(mf[["fxGeom_class"]], fxGeom)
lst_aesName <- purrr::map(mf[["aes"]], AesName)
assertthat::assert_that(length(nominations) != 0,
msg = "No nominations have been provided.")
lgl_veto <- FALSE
for(i in seq_len(nrow(mf))) {
mf_args <- dplyr::select(mf[i, ], -aes) %>%
rlang::as_list(.) %>%
purrr::map(1)
lgl_veto <- lgl_veto |
purrr::map_lgl(
nominations,
~ do.call("fxe_layer_complete_veto",
rlang::list2(nomination = ., fx_geom = lst_fxGeom[[i]],
aes_name = lst_aesName[[i]], data = data,
!!!mf_args))
)
}
lgl_veto
length(nominations)
length(lgl_veto)
nominations[[3]]
nominations <- nominations[!lgl_veto]
nominations
assertthat::assert_that(length(nominations) != 0,
msg = "Aesthetics incompatible.")
votes <- rep(0, length(nominations))
for(i in seq_len(nrow(mf))) {
mf_args <- dplyr::select(mf[i, ], -aes) %>%
rlang::as_list(.) %>%
purrr::map(1)
votes <- votes +
purrr::map_dbl(
nominations,
~ do.call("fxe_layer_complete_vote",
rlang::list2(nomination = ., fx_geom = lst_fxGeom[[i]],
aes_name = lst_aesName[[i]], data = data,
!!!mf_args))
)
}
max_votes <- which(votes == max(votes))
votes
nomination(
ggplot2::geom_line(),
ggplot2::geom_ribbon(new_mapping, alpha = 0.1)
) -> tst
nomination(
ggplot2::geom_line(),
ggplot2::geom_ribbon(aes(ymin = lower, ymax = upper), alpha = 0.1)
) -> tst
nomination
tst
nom_layers(tst)
lst_aesName
lst_fxGeom
lst_fxGeom[[2]] <- fxGeom("Time")
lst_fxGeom
votes <- rep(0, length(nominations))
for(i in seq_len(nrow(mf))) {
mf_args <- dplyr::select(mf[i, ], -aes) %>%
rlang::as_list(.) %>%
purrr::map(1)
votes <- votes +
purrr::map_dbl(
nominations,
~ do.call("fxe_layer_complete_vote",
rlang::list2(nomination = ., fx_geom = lst_fxGeom[[i]],
aes_name = lst_aesName[[i]], data = data,
!!!mf_args))
)
}
votes
max_votes <- which(votes == max(votes))
max_vote <- max_votes[1]
max_vote
nominations[[max_vote]]
tbl <- tbl %>% mutate_mf(fxGeom_assoc_variables = list(aes(upper = xh, lower = xl)), fxGeom_class = if_else(name == "y", "Continuous", "Time"))
tbl
data
data <- data %>% mutate_mf(fxGeom_assoc_variables = list(aes(upper = xh, lower = xl)), fxGeom_class = if_else(name == "y", "Continuous", "Time"))
data
metaframe(data)
fx_ggplot(data, aes(x = x, y = y))
metaframe(data)[["fxGeom_assoc_vars"]]
metaframe(data)[["fxGeom_assoc_variables"]]
metaframe(data)[["fxGeom_assoc_variables"]] <- metaframe(data)[["fxGeom_assoc_vars"]]
metaframe(data)[["fxGeom_assoc_variables"]]
fx_ggplot(data, aes(x = x, y = y))
data <-
data %>%
fx_default(columns = fx_ggplot_columns, ...) %>%
fx_evaluate()
data <-
data %>%
fx_default(columns = fx_ggplot_columns) %>%
fx_evaluate()
data
metaframe(data)
metaframe(data)[["fxGeom_assoc_variables"]]
layers <- c(
# At first, we add the geometric information along one dimension
purrr::map(names(mapping), ~ fxi_layer_single(data, mapping, .)) %>%
unlist(recursive = FALSE),
# Then, we add the geometric information that is dependent on all dimensions
fxi_layer_complete(data, mapping),
if(length(facet_vars) != 0)
facet_wrap(facet_vars, labeller = fxi_labeller(data, facet_vars))
else NULL
)
mf <- metaframe(data) %>%
dplyr::mutate(name = as.character(name)) %>%
dplyr::inner_join(
dplyr::tibble(aes = names(mapping), name = get_inds(mapping)),
by = "name")
mf <- metaframe(data) %>%
dplyr::mutate(name = as.character(name)) %>%
dplyr::inner_join(
dplyr::tibble(aes = names(mapping), name = tectr:::get_inds(mapping)),
by = "name")
mf
assertthat::assert_that("fxGeom_class" %in% colnames(mf))
nominations <- fxi_layer_complete_nominate(data, mf)
nominations <- tectr:::fxi_layer_complete_nominate(data, mf)
nominations
data <- data %>% mutate_mf(fxGeom_assoc_variables = list(aes(upper = xh, lower = xl)), fxGeom_class = if_else(name == "y", "ContinuousCI", "Time"))
fx_ggplot(data, aes(x = x, y = y))
library(tectr)
?do.call
